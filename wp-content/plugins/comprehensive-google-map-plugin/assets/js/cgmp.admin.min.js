var jQueryCgmp=jQuery.noConflict();function sendShortcodeToEditor(a){a=buildShortcode("#"+a,jQueryCgmp);send_to_editor("<br />"+a+"<br />")}function displayShortcodeInPopup(a){var b=jQueryCgmp,a="Select the generated shortcode text below including the square brackets and press CTRL+C (CMMND+C on Mac) to copy:<br /><br /><div id='inner-shortcode-dialog'><b>"+buildShortcode("#"+a,b)+"</b></div><br /><br />Paste the copied text into your post/page";displayPopupWithContent(a,b)}
function displayPopupWithContent(a,b){function f(a,d){a.preventDefault();var c=b(d).closest("div.cgmp-popup-shortcode-dialog");c&&b(c).remove();0==b("div.cgmp-popup-shortcode-dialog").length&&b("#cgmp-popup-mask").remove()}var d=b('<div id="cgmp-popup-mask"/>'),c=Math.random().toString(36).substring(3),g=b('<div id="'+c+'" class="cgmp-popup-shortcode-dialog cgmp-popup-window">');g.html("<div class='dismiss-container'><a class='dialog-dismiss' href='javascript:void(0)'>\u00d7</a></div><p style='padding: 10px 10px 0 10px'>"+
a+"</p><div align='center'><input type='button' class='close-dialog' value='Close' /></div>");b("body").append(d);b("body").append(g);d=b(document).height();g=b(window).width();b("#cgmp-popup-mask").css({width:g,height:d,opacity:0.1});1==b("#cgmp-popup-mask").length&&b("#cgmp-popup-mask").show();d=b(window).height();g=b(window).width();b("div#"+c).css("top",d/2-b("div#"+c).height()/2);b("div#"+c).css("left",g/2-b("div#"+c).width()/2);b("div#"+c).fadeIn(500);b(".cgmp-popup-window .close-dialog").click(function(a){f(a,
b(this))});b(".cgmp-popup-window .dialog-dismiss").click(function(a){f(a,b(this))});b("#cgmp-popup-mask").click(function(){b(this).remove();b(".cgmp-popup-window").remove()});b(window).resize(function(){var a=b(".window"),d=b(document).height(),c=b(window).width();b("#cgmp-popup-mask").css({width:c,height:d});d=b(window).height();c=b(window).width();a.css("top",d/2-a.height()/2);a.css("left",c/2-a.width()/2)})}
function buildShortcode(a,b){var f="[google-map-v3 ";b(a+" .shortcodeitem").each(function(){var a=b(this).attr("role"),c=b(this).val();"addmarkerlisthidden"==a&&(c=b("<div />").text(c).html(),c=c.replace(RegExp("'","g"),""),c=c.replace(RegExp('"',"g"),""));"checkbox"==b(this).attr("type")&&(c=b(this).is(":checked"));"radio"==b(this).attr("type")&&(a=b(this).attr("name"),c=b("input[name="+a+"]:checked").val());if(null==a||"undefined"==typeof a||"undefined"==a)a=b(this).attr("id");null!=a&&""!=a&&null!=
c&&""!=c&&(0<a.indexOf("_")&&(a=a.replace(/_/g,"")),0<a.indexOf("hidden")&&(a=a.replace(/hidden/g,"")),f+=a+'="'+c+'" ')});f=f.replace(/^\s\s*/,"").replace(/\s\s*$/,"");return f+="]"}
(function(a){var b,f,d;function c(){m=[];a.map(a("div.widget-google-map-container ul.token-input-list, div#google-map-container-metabox ul.token-input-list"),function(b){var c=a(b).attr("id");if(null!=c&&-1==c.indexOf("__i__")){var d=a("#"+b.id+"hidden").val(),e=a(b).tokenInput({holderId:c});null!=d&&""!=d&&(b=d.split("|"),a.map(b,function(a){e.add(a)}));m.push({id:c,obj:e})}})}function g(){a("input.marker-text-details").live("focus",function(){-1!=a(this).val().indexOf("Enter marker")&&a(this).val("");
a(this).removeClass("marker-input-info-text")});a("input.marker-text-details").live("blur",function(){""==a(this).val().replace(/^\s+|\s+$/g,"")&&(a(this).addClass("marker-input-info-text"),-1==a(this).attr("id").indexOf("bubble")?a(this).val(b):a(this).val(f))})}function r(){a("input.add-additonal-location").live("click",function(){var c=a(this).attr("id")+"list",o={};a.map(a(m),function(a){a.id==c&&(o=a.obj)});var p="#"+a(this).attr("id")+"input",e="#"+a(this).attr("id").replace("addmarker","locationaddmarkerinput"),
g="#"+a(this).attr("id").replace("addmarker","bubbletextaddmarkerinput"),h=a(g).val(),h=h.replace(/^\s+|\s+$/g,""),i="#"+a(this).attr("id")+"icons",k=a(i+" input[name='custom-icons-radio']:checked").val();if(null!=a(e).val()&&""!=a(e).val()&&-1==a(e).val().indexOf("Enter marker")){var j=a(e).val().replace(/^\s+|\s+$/g,"");RegExp(/^(?=.*(\d|[a-zA-Z])).{5,}$/).test(j)?(h=d+h,-1!=h.indexOf("Enter marker")&&(h=""),j=j.replace(RegExp("'","g"),""),h=h.replace(RegExp("'","g"),""),h=h.replace(RegExp('"',
"g"),""),o.add(j+d+k+h),l(a(i)),a(i+" img#default-marker-icon").attr("style","cursor: default; "),a(i+" img#default-marker-icon").addClass("selected-marker-image"),a(i+" input#default-marker-icon-radio").attr("checked","checked"),a(p).attr("style",""),a(p).addClass("default-marker-icon"),a(e).val(b),a(g).val(f),a(e).addClass("marker-input-info-text"),a(g).addClass("marker-input-info-text")):n(e)}else n(e);return!1})}function n(b){a(b).fadeIn("slow",function(){a(this).addClass("errorToken")});a(b).fadeOut(function(){a(this).removeClass("errorToken");
a(this).fadeIn("slow")})}function l(b){a.each(b.children(),function(){var b=a(this).find("img");null!=b&&(a(b).attr("style",""),a(b).removeClass("selected-marker-image"))})}function s(){a("div.custom-icons-placeholder a img").live("click",function(){if(null!=a(this).attr("src")){var b=a(this).closest("div.custom-icons-placeholder");l(b);a(this).parent("a").siblings('input[name="custom-icons-radio"]').attr("checked","checked");k(b,a(this))}});a("input[name='custom-icons-radio']").live("click",function(){var b=
a(this).siblings("a").children("img");if(null!=a(b).attr("src")){var c=a(this).closest("div.custom-icons-placeholder");l(c);k(c,b)}})}function k(b,c){a(c).attr("style","cursor: default; ");a(c).addClass("selected-marker-image");var d=a(c).attr("src"),e=a(b).attr("id").replace("icons","input");a("#"+e).attr("style","background: url('"+d+"') no-repeat scroll 0px 0px transparent !important");a("#"+e).attr("readonly","readonly");a("#"+e).removeClass("default-marker-icon")}function t(){a("a.google-map-tooltip-marker").live("hover",
function(){var b=a(this).attr("id");a("a#"+b+"[title]").tooltip({effect:"slide",opacity:0.8,tipClass:"google-map-tooltip",offset:[-5,0],events:{def:"click, mouseleave"}});a("a#"+b).live("mouseout",function(){a(this).data("tooltip")&&a(this).data("tooltip").hide()})})}function u(){a("input.marker-geo-mashup").live("change",function(){var b=a(this).attr("id"),c=b.replace("mashup","icons"),d=b.replace("addmarkermashup","kml");a(this).is(":checked")?(a("#"+d).closest("fieldset").fadeOut(),a("#"+c).closest("fieldset").fadeOut(),
a("#"+b+"hidden").val("true")):(a("#"+d).closest("fieldset").fadeIn(),a("#"+c).closest("fieldset").fadeIn(),a("#"+b+"hidden").val("false"))})}function q(){a.each(a("input.marker-geo-mashup"),function(){var b=a(this).attr("id"),c=a("#"+b+"hidden").val(),d=b.replace("mashup","icons"),b=b.replace("addmarkermashup","kml");"true"==c?(a(this).attr("checked","checked"),a("#"+b).closest("fieldset").hide(),a("#"+d).closest("fieldset").hide()):(a(this).removeAttr("checked"),a("#"+b).closest("fieldset").show(),
a("#"+d).closest("fieldset").show())})}b=void 0;f=void 0;d=void 0;d=a("object#global-data-placeholder param#sep").val();if(null==d||"undefined"==d)d="{}";a("object#global-data-placeholder param#customMarkersUri").val();b=a("object#global-data-placeholder param#defaultLocationText").val();f=a("object#global-data-placeholder param#defaultBubbleText").val();var m=[];a(document).ready(function(){c();r();g();t();s();q();u();"function"==typeof a("ul.tools-tabs-nav").tabs&&a("ul.tools-tabs-nav").tabs("div.tools-tab-body",
{tabs:"li",effect:"default"})});a("div.widget-google-map-container").ajaxSuccess(function(a,b,d){null!=d.data&&0<d.data.indexOf("id_base=comprehensivegooglemap")&&(c(),q())})})(jQueryCgmp);
